---

- name: oh-my-zsh - install packages
  apt:
    name: "{{ item }}"
  with_items:
    - zsh

- name: oh-my-zsh - install oh-my-zsh
  git:
    repo: https://github.com/robbyrussell/oh-my-zsh.git
    dest: "/home/{{ user.name }}/.oh-my-zsh"

- name: oh-my-zsh - copy config file
  copy:
    src: "/home/{{ user.name }}/.oh-my-zsh/templates/zshrc.zsh-template"
    dest: "/home/{{ user.name }}/.zshrc"
    owner: "{{ user.name }}"
    group: "{{ user.name }}"
    mode: 0644
    remote_src: yes

- name: oh-my-zsh - change shell to zsh
  shell: "chsh -s /bin/zsh {{ user.name }}"
  